(function(d){function a(G,I,D,H,J){function C(){B.unbind();I&&c(I,D,H,J);J.startOrder=[];J.newOrder=[];J.origSort=[];J.checkSort=[];e.removeStyle(J.prefix+"filter, filter, "+J.prefix+"transform, transform, opacity, display").css(J.clean).removeAttr("data-checksum");window.atob||e.css({display:"none",opacity:"0"});B.removeStyle(J.prefix+"transition, transition, "+J.prefix+"perspective, perspective, "+J.prefix+"perspective-origin, perspective-origin, "+(J.resizeContainer?"height":""));"list"==J.layoutMode?(w.css({display:J.targetDisplayList,opacity:"1"}),J.origDisplay=J.targetDisplayList):(w.css({display:J.targetDisplayGrid,opacity:"1"}),J.origDisplay=J.targetDisplayGrid);J.origLayout=J.layoutMode;setTimeout(function(){e.removeStyle(J.prefix+"transition, transition");J.mixing=!1;if("function"==typeof J.onMixEnd){var f=J.onMixEnd.call(this,J);J=f?f:J}})}clearInterval(J.failsafe);J.mixing=!0;if("function"==typeof J.onMixStart){var F=J.onMixStart.call(this,J);J=F?F:J}for(var E=J.transitionSpeed,F=0;2>F;F++){var y=0==F?y=J.prefix:"";J.transition[y+"transition"]="all "+E+"ms linear";J.transition[y+"transform"]=y+"translate3d(0,0,0)";J.perspective[y+"perspective"]=J.perspectiveDistance+"px";J.perspective[y+"perspective-origin"]=J.perspectiveOrigin}var v=J.targetSelector,e=H.find(v);e.each(function(){this.data={}});var B=e.parent();B.css(J.perspective);J.easingFallback="ease-in-out";"smooth"==J.easing&&(J.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");"snap"==J.easing&&(J.easing="cubic-bezier(0.77, 0, 0.175, 1)");"windback"==J.easing&&(J.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",J.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");"windup"==J.easing&&(J.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",J.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");F="list"==J.layoutMode&&null!=J.listEffects?J.listEffects:J.effects;Array.prototype.indexOf&&(J.fade=-1<F.indexOf("fade")?"0":"",J.scale=-1<F.indexOf("scale")?"scale(.01)":"",J.rotateZ=-1<F.indexOf("rotateZ")?"rotate(180deg)":"",J.rotateY=-1<F.indexOf("rotateY")?"rotateY(90deg)":"",J.rotateX=-1<F.indexOf("rotateX")?"rotateX(90deg)":"",J.blur=-1<F.indexOf("blur")?"blur(8px)":"",J.grayscale=-1<F.indexOf("grayscale")?"grayscale(100%)":"");G=G.replace(/\s|\//g,".");var w=d(),o=d();if("or"==J.filterLogic){var z=G.split(".");!0==J.multiFilter&&""==z[0]&&z.shift();1>z.length?o=o.add(H.find(v+":visible")):e.each(function(){for(var g=0,f=d(this),h=0;h<z.length;h++){f.hasClass(z[h])&&(w=w.add(f),g++)}0==g&&(o=o.add(f))})}else{w=w.add(B.find(v+"."+G)),o=o.add(B.find(v+":not(."+G+"):visible"))}G=w.length;var i=d(),x=d(),A=d();o.each(function(){var f=d(this);"none"!=f.css("display")&&(i=i.add(f),A=A.add(f))});if(w.filter(":visible").length==G&&!i.length&&!I){if(J.origLayout==J.layoutMode){return C(),!1}if(1==w.length){return"list"==J.layoutMode?(H.addClass(J.listClass),H.removeClass(J.gridClass),A.css("display",J.targetDisplayList)):(H.addClass(J.gridClass),H.removeClass(J.listClass),A.css("display",J.targetDisplayGrid)),C(),!1}}J.origHeight=B.height();if(w.length){H.removeClass(J.failClass);w.each(function(){var f=d(this);"none"==f.css("display")?x=x.add(f):A=A.add(f)});if(J.origLayout!=J.layoutMode&&!1==J.animateGridList){return"list"==J.layoutMode?(H.addClass(J.listClass),H.removeClass(J.gridClass),A.css("display",J.targetDisplayList)):(H.addClass(J.gridClass),H.removeClass(J.listClass),A.css("display",J.targetDisplayGrid)),C(),!1}if(!window.atob){return C(),!1}e.css(J.clean);A.each(function(){this.data.origPos=d(this).offset()});"list"==J.layoutMode?(H.addClass(J.listClass),H.removeClass(J.gridClass),x.css("display",J.targetDisplayList)):(H.addClass(J.gridClass),H.removeClass(J.listClass),x.css("display",J.targetDisplayGrid));x.each(function(){this.data.showInterPos=d(this).offset()});i.each(function(){this.data.hideInterPos=d(this).offset()});A.each(function(){this.data.preInterPos=d(this).offset()});"list"==J.layoutMode?A.css("display",J.targetDisplayList):A.css("display",J.targetDisplayGrid);I&&c(I,D,H,J);if(I&&J.origSort.compare(J.checkSort)){return C(),!1}i.hide();x.each(function(){this.data.finalPos=d(this).offset()});A.each(function(){this.data.finalPrePos=d(this).offset()});J.newHeight=B.height();I&&c("reset",null,H,J);x.hide();A.css("display",J.origDisplay);"block"==J.origDisplay?(H.addClass(J.listClass),x.css("display",J.targetDisplayList)):(H.removeClass(J.listClass),x.css("display",J.targetDisplayGrid));J.resizeContainer&&B.css("height",J.origHeight+"px");G={};for(F=0;2>F;F++){y=0==F?y=J.prefix:"",G[y+"transform"]=J.scale+" "+J.rotateX+" "+J.rotateY+" "+J.rotateZ,G[y+"filter"]=J.blur+" "+J.grayscale}x.css(G);A.each(function(){var h=this.data,m=d(this);m.hasClass("mix_tohide")?(h.preTX=h.origPos.left-h.hideInterPos.left,h.preTY=h.origPos.top-h.hideInterPos.top):(h.preTX=h.origPos.left-h.preInterPos.left,h.preTY=h.origPos.top-h.preInterPos.top);for(var l={},j=0;2>j;j++){var k=0==j?k=J.prefix:"";l[k+"transform"]="translate("+h.preTX+"px,"+h.preTY+"px)"}m.css(l)});"list"==J.layoutMode?(H.addClass(J.listClass),H.removeClass(J.gridClass)):(H.addClass(J.gridClass),H.removeClass(J.listClass));setTimeout(function(){if(J.resizeContainer){for(var f={},h=0;2>h;h++){var g=0==h?g=J.prefix:"";f[g+"transition"]="all "+E+"ms ease-in-out";f.height=J.newHeight+"px"}B.css(f)}i.css("opacity",J.fade);x.css("opacity",1);x.each(function(){var j=this.data;j.tX=j.finalPos.left-j.showInterPos.left;j.tY=j.finalPos.top-j.showInterPos.top;for(var m={},l=0;2>l;l++){var k=0==l?k=J.prefix:"";m[k+"transition-property"]=k+"transform, "+k+"filter, opacity";m[k+"transition-timing-function"]=J.easing+", linear, linear";m[k+"transition-duration"]=E+"ms";m[k+"transition-delay"]="0";m[k+"transform"]="translate("+j.tX+"px,"+j.tY+"px)";m[k+"filter"]="none"}d(this).css("-webkit-transition","all "+E+"ms "+J.easingFallback).css(m)});A.each(function(){var j=this.data;j.tX=0!=j.finalPrePos.left?j.finalPrePos.left-j.preInterPos.left:0;j.tY=0!=j.finalPrePos.left?j.finalPrePos.top-j.preInterPos.top:0;for(var m={},l=0;2>l;l++){var k=0==l?k=J.prefix:"";m[k+"transition"]="all "+E+"ms "+J.easing;m[k+"transform"]="translate("+j.tX+"px,"+j.tY+"px)"}d(this).css("-webkit-transition","all "+E+"ms "+J.easingFallback).css(m)});f={};for(h=0;2>h;h++){g=0==h?g=J.prefix:"",f[g+"transition"]="all "+E+"ms "+J.easing+", "+g+"filter "+E+"ms linear, opacity "+E+"ms linear",f[g+"transform"]=J.scale+" "+J.rotateX+" "+J.rotateY+" "+J.rotateZ,f[g+"filter"]=J.blur+" "+J.grayscale,f.opacity=J.fade}i.css(f);B.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(j){if(-1<j.originalEvent.propertyName.indexOf("transform")||-1<j.originalEvent.propertyName.indexOf("opacity")){-1<v.indexOf(".")?d(j.target).hasClass(v.replace(".",""))&&C():d(j.target).is(v)&&C()}})},10);J.failsafe=setTimeout(function(){J.mixing&&C()},E+400)}else{J.resizeContainer&&B.css("height",J.origHeight+"px");if(!window.atob){return C(),!1}i=o;setTimeout(function(){B.css(J.perspective);if(J.resizeContainer){for(var f={},h=0;2>h;h++){var g=0==h?g=J.prefix:"";f[g+"transition"]="height "+E+"ms ease-in-out";f.height=J.minHeight+"px"}B.css(f)}e.css(J.transition);if(o.length){f={};for(h=0;2>h;h++){g=0==h?g=J.prefix:"",f[g+"transform"]=J.scale+" "+J.rotateX+" "+J.rotateY+" "+J.rotateZ,f[g+"filter"]=J.blur+" "+J.grayscale,f.opacity=J.fade}i.css(f);B.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(j){if(-1<j.originalEvent.propertyName.indexOf("transform")||-1<j.originalEvent.propertyName.indexOf("opacity")){H.addClass(J.failClass),C()}})}else{J.mixing=!1}},10)}}function c(u,w,q,v){function x(g,f){return 1*g.attr(u).toLowerCase()<1*f.attr(u).toLowerCase()?-1:1*g.attr(u).toLowerCase()>1*f.attr(u).toLowerCase()?1:0}function p(f){"asc"==w?t.prepend(f).prepend(" 	"):t.append(f).append(" 	")}q.find(v.targetSelector).wrapAll('<div class="mix_sorter"/>');var t=q.find(".mix_sorter");v.origSort.length||t.find(v.targetSelector+":visible").each(function(){d(this).wrap("<s/>");v.origSort.push(d(this).parent().html().replace(/\s+/g,""));d(this).unwrap()});t.empty();if("reset"==u){d.each(v.startOrder,function(){t.append(this).append(" 	")})}else{if("default"==u){d.each(v.origOrder,function(){p(this)})}else{if("random"==u){if(!v.newOrder.length){for(var s=v.startOrder.slice(),i=s.length,e=i;e--;){var l=parseInt(Math.random()*i),o=s[e];s[e]=s[l];s[l]=o}v.newOrder=s}d.each(v.newOrder,function(){t.append(this).append(" 	")})}else{"custom"==u?d.each(w,function(){p(this)}):("undefined"===typeof v.origOrder[0].attr(u)&&console.log("No such attribute found. Terminating"),v.newOrder.length||(d.each(v.origOrder,function(){v.newOrder.push(d(this))}),v.newOrder.sort(x)),d.each(v.newOrder,function(){p(this)}))}}}v.checkSort=[];t.find(v.targetSelector+":visible").each(function(g){var f=d(this);0==g&&f.attr("data-checksum","1");f.wrap("<s/>");v.checkSort.push(f.parent().html().replace(/\s+/g,""));f.unwrap()});q.find(v.targetSelector).unwrap()}var b={init:function(e){return this.each(function(){var g={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};e&&d.extend(g,e);this.config=g;d.support.touch="ontouchend" in document;d.support.touch&&(g.isTouch=!0,g.resetDelay=350);g.container=d(this);var l=g.container,n;i:{n=l[0];for(var i=["Webkit","Moz","O","ms"],k=0;k<i.length;k++){if(i[k]+"Transition" in n.style){n=i[k];break i}}n="transition" in n.style?"":!1}g.prefix=n;g.prefix=g.prefix?"-"+g.prefix.toLowerCase()+"-":"";l.find(g.targetSelector).each(function(){g.origOrder.push(d(this))});for(n=0;2>n;n++){i=0==n?i=g.prefix:"",g.transition[i+"transition"]="all "+g.transitionSpeed+"ms ease-in-out",g.perspective[i+"perspective"]=g.perspectiveDistance+"px",g.perspective[i+"perspective-origin"]=g.perspectiveOrigin}for(n=0;2>n;n++){i=0==n?i=g.prefix:"",g.clean[i+"transition"]="none"}"list"==g.layoutMode?(l.addClass(g.listClass),g.origDisplay=g.targetDisplayList):(l.addClass(g.gridClass),g.origDisplay=g.targetDisplayGrid);g.origLayout=g.layoutMode;n=g.showOnLoad.split(" ");d.each(n,function(){d(g.filterSelector+'[data-filter="'+this+'"]').addClass("active")});l.find(g.targetSelector).addClass("mix_all");"all"==n[0]&&(n[0]="mix_all",g.showOnLoad="mix_all");var m=d();d.each(n,function(){m=m.add(d("."+this))});m.each(function(){var f=d(this);"list"==g.layoutMode?f.css("display",g.targetDisplayList):f.css("display",g.targetDisplayGrid);f.css(g.transition)});setTimeout(function(){g.mixing=!0;m.css("opacity","1");setTimeout(function(){"list"==g.layoutMode?m.removeStyle(g.prefix+"transition, transition").css({display:g.targetDisplayList,opacity:1}):m.removeStyle(g.prefix+"transition, transition").css({display:g.targetDisplayGrid,opacity:1});g.mixing=!1;if("function"==typeof g.onMixLoad){var f=g.onMixLoad.call(this,g);g=f?f:g}},g.transitionSpeed)},10);g.filter=g.showOnLoad;d(g.sortSelector).bind(g.buttonEvent,function(){if(!g.mixing){var f=d(this),j=f.attr("data-sort"),h=f.attr("data-order");if(f.hasClass("active")){if("random"!=j){return !1}}else{d(g.sortSelector).removeClass("active"),f.addClass("active")}l.find(g.targetSelector).each(function(){g.startOrder.push(d(this))});a(g.filter,j,h,l,g)}});d(g.filterSelector).bind(g.buttonEvent,function(){if(!g.mixing){var f=d(this);if(!1==g.multiFilter){d(g.filterSelector).removeClass("active"),f.addClass("active"),g.filter=f.attr("data-filter"),d(g.filterSelector+'[data-filter="'+g.filter+'"]').addClass("active"),"all"==g.filter&&(g.filter="mix_all")}else{var h=f.attr("data-filter");"all"==h&&(h="mix_all");f.hasClass("active")?(f.removeClass("active"),g.filter=g.filter.replace(RegExp("(\\s|^)"+h),"")):(f.addClass("active"),g.filter=g.filter+" "+h)}a(g.filter,null,null,l,g)}})})},toGrid:function(){return this.each(function(){var e=this.config;"grid"!=e.layoutMode&&(e.layoutMode="grid",a(e.filter,null,null,d(this),e))})},toList:function(){return this.each(function(){var e=this.config;"list"!=e.layoutMode&&(e.layoutMode="list",a(e.filter,null,null,d(this),e))})},filter:function(e){return this.each(function(){var f=this.config;d(f.filterSelector).removeClass("active");d(f.filterSelector+'[data-filter="'+e+'"]').addClass("active");"all"==e&&(e="mix_all");f.mixing||(f.filter=e,a(e,null,null,d(this),f))})},sort:function(e){return this.each(function(){var f=this.config;if(d.isArray(e)){var g=e[0],i=e[1]}else{g=e,i="desc"}f.mixing||(d(this).find(f.targetSelector).each(function(){f.startOrder.push(d(this))}),a(f.filter,g,i,d(this),f))})}};d.fn.mixitup=function(f,e){if(b[f]){return b[f].apply(this,Array.prototype.slice.call(arguments,1))}if("object"===typeof f||!f){return b.init.apply(this,arguments)}};d.fn.removeStyle=function(e){return this.each(function(){var f=d(this);e=e.replace(/\s+/g,"");var g=e.split(",");d.each(g,function(){var h=RegExp(this.toString()+"[^;]+;?","g");f.attr("style",function(j,i){if(i){return i.replace(h,"")}})})})};Array.prototype.compare=function(f){if(this.length!=f.length){return !1}for(var e=0;e<f.length;e++){if(this[e].compare&&!this[e].compare(f[e])||this[e]!==f[e]){return !1}}return !0}})(jQuery);